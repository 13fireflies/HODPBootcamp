EDA: datethings
```{r}
df$dateend
```
EDA: Intersections
```{r}
plot(df$views ~df$division, las = 2)
```
sum(df$dateend == 0)
sum(df$dateend == 0)
typeof(df$dateend)
df <- read.csv("MuseumDataFull1015.csv")
summary(df)
sum(df$dateend == 0)
typeof(df$dateend)
sum(df$datebegin == 0 & df$dateend == 0)
sum(df$dateend == 0)
sum(df$datebegin == 0 & df$dateend == 0)
sum(df$dateend == 0)
sum(df$datebegin == 0 & df$dateend == 0)
sum(df$dateend == 0)
sum(df$datebegin == 0 & df$dateend == 0)
head(df$century[df$datebegin == 0 & df$dateend == 0,])
head(df$century[df$datebegin == 0 & df$dateend == 0])
head(df$name[df$datebegin == 0 & df$dateend == 0])
head(df$names[df$datebegin == 0 & df$dateend == 0])
head(df$century[df$datebegin == 0 & df$dateend == 0])
hist(df$dateend)
hist(df$dateend, breaks = 300)
sum(df$datebegin == 0 & df$dateend == 0)
names(df)[names(df) == "totaluniquepageviews"] <- "views"
hist(df$views, breaks = 500)
hist(df$views, breaks = 500, xlim = c(0, 5000))
hist(df$views, breaks = 5000, xlim = c(0, 500))
hist(df$views, breaks = 5000, xlim = c(0, 500), ylim = c(0, 100))
hist(df$views, breaks = 5000, xlim = c(0, 200))
max(df$views) #max = 13079
df[which.max(df$views),]
summary(df$views)
quantile(df$views, c(0:20)/20)
sum(df$views > 100) #421
df[which.max(df$views),]
summary(df$views)
quantile(df$views, c(0:20)/20)
df$views > 100) #
sum(df$views > 100) #421
# broader stroke, 21 categories
head(df$culture)
allcnames <- unique(df$culture)
length(allcnames)
orderedcnames <- allcnames[order(allcnames)]
orderedcnames
?gsub
sum(df$culture == "unknown")
head(df$culture)
allcnames <- unique(df$culture)
length(allcnames)
orderedcnames <- allcnames[order(allcnames)]
orderedcnames
# first remove the question marks, kinda pointless here
df$culture <- gsub("[?]", "", df$culture)
# Make consistent different locations
df$culture <- gsub("^British.+", "British", df$culture)
df$culture <- gsub("^Italian.+", "Italian", df$culture)
df$culture <- gsub("^Roman.+", "Roman", df$culture)
df$culture <- gsub("^Spanish.+", "Spanish", df$culture)
df$culture[df$culture == "" | df$culture == "Unidentified culture"] <- "Unknown"
length(unique(df$culture))
# boarder stroke, 20 categories
df$fculture <- df$culture
culturerank <- names(which(table(df$culture) > 50))
length(culturerank)
length(culturerank)
df$fculture[!df$culture %in% culturerank] <- "Other"
table(df$fculture)
df$fculture <- as.factor(df$fculture)
plot(df$fculture, las = 2)
# smaller stroke, 10 categories
df$ffculture <- df$culture
culturerank <- names(which(table(df$culture) > 500))
length(culturerank)
df$ffculture[!df$culture %in% culturerank] <- "Other"
table(df$ffculture)
df$ffculture <- as.factor(df$ffculture)
table(df$ffculture)
df$ffculture <- as.factor(df$ffculture)
plot(df$ffculture, las = 2)
head(df$department)
unique(df$department)
df$department <- as.factor(df$department)
head(df$division)
length(unique(df$division))
unique(df$division)
df$division[df$division == ""] <- "Other"
df$division <- as.factor(df$division)
plot(df$division, las = 2)
head(df$period)
length(unique(df$period))
head(df$period)
unique(df$period)
head(df$century)
length(unique(df$century))
unique(df$century)
#unique(df$century)
head(df$dateend)
sum(df$datebegin == 0 & df$dateend == 0)
hist(df$dateend, breaks = 300)
sum(df$datebegin == 0 & df$dateend == 0)
head(df$century[df$datebegin == 0 & df$dateend == 0])
head(df$dated)
df_validdates <- df[df$datebegin == 0 & df$dateend == 0,]
df_validdates$meddate <- (df$datebegin + df$dateend) / 2
df_validdates <- df[df$datebegin == 0 & df$dateend == 0,]
df_validdates$meddate <- (df$datebegin + df$dateend) / 2
df_validdates$meddate <- (df_validdates$datebegin + df_validdates$dateend) / 2
hist(df_validdates$meddate)
df_validdates$meddate <- (df_validdates$datebegin + df_validdates$dateend) / 2
df_validdates$meddate
df_validdates <- df[df$datebegin != 0 | df$dateend != 0,]
df_validdates$meddate <- (df_validdates$datebegin + df_validdates$dateend) / 2
hist(df_validdates$meddate)
hist(df_validdates$meddate, breaks = 100)
hist(df_validdates$meddate, breaks = 300)
lm(pageviews ~ meddate, data = df_validdates)
lm(views ~ meddate, data = df_validdates)
summary(lm1)
lm1 <- lm(views ~ meddate, data = df_validdates)
summary(lm1)
plot(lm1)
summary(df$rank)
hist(df$rank)
hist(df$rank, breaks = 200)
hist(df$rank, breaks = 300)
hist(df_validdates$meddate, breaks = 300)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate)
hist(df_validdates$logdate)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate + 0.001)
hist(df_validdates$logdate)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate)
hist(df_validdates$logdate)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate + 0.000000000001)
hist(df_validdates$logdate)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate + 0.00000001)
hist(df_validdates$logdate)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate + 0.000001)
hist(df_validdates$logdate)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate + 0.001)
hist(df_validdates$logdate)
log(max(df_validdates$meddate))
log(min(df_validdates$meddate))
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate + 0.001)
hist(df_validdates$logdate)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate + 0.01)
hist(df_validdates$logdate)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate + 0.1)
hist(df_validdates$logdate)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate + 1)
hist(df_validdates$logdate)
hist(df_validdates$logdate)
df_validdates$meddate
df_validdates$logviews <- log(df_validdates$views)
hist(df_validdates$logviews)
hist(df_validdates$views)
hist(df_validdates$logviews)
df_validdates$logviews <- log(df_validdates$views, 10)
hist(df_validdates$logviews)
df_validdates$logviews <- log(df_validdates$views, 20)
hist(df_validdates$logviews)
df_validdates$logviews <- log(df_validdates$views)
hist(df_validdates$logviews)
lm2 <- lm(logviews ~ logdate, data = df_validdates)
lm2 <- lm(logviews ~ logdate, data = df_validdates)
hist(df_validdates$logviews)
hist(df_validdates$logdate)
df_validdates$logviews <- log(df_validdates$views)
hist(df_validdates$logviews)
summary(df_validdates$logviews)
df_validdates$logviews <- log(df_validdates$views + 1)
hist(df_validdates$logviews)
summary(df_validdates$logviews)
lm2 <- lm(logviews ~ logdate, data = df_validdates)
summary(lm2)
plot(lm2)
summary(lm2)
plot(lm2) #assumptions really not met
boxplot(ffculture ~ views, data = df)
boxplot(views ~ ffculture, data = df)
plot(logviews ~ logdate, data = df_validdates)
plot(logviews ~ logdate, data = df_validdates)
abline(lm2)
abline(lm2, col = "Blue")
plot(logviews ~ logdate, data = df_validdates)
abline(lm2, col = "Blue")
hist(df_validdates$logviews)
summary(df_validdates$logviews)
hist(df_validdates$logdate)
hist(df_validdates$logviews)
lm2 <- lm(logviews ~ logdate, data = df_validdates)
summary(lm2)
plot(lm2) #assumptions really not met
boxplot(views ~ ffculture, data = df)
summary(df$rank)
hist(df$rank, breaks = 300)
summary(df$rank)
hist(df$rank, breaks = 300)
summary(df$rank)
hist(df$rank, breaks = 300)
summary(df$rank)
hist(df$rank, breaks = 300)
summary(df$rank)
hist(df$rank, breaks = 300)
summary(df$rank)
hist(df$rank, breaks = 300)
summary(df$rank)
hist(df$rank, breaks = 300)
summary(df$rank)
hist(df$rank, breaks = 300)
summary(df$rank)
hist(df$rank, breaks = 300)
plot(rank ~ views, data = df)
plot(rank ~ meddate, data = df_validdates)
plot(rank ~ views, data = df)
plot(rank ~ meddate, data = df_validdates)
plot(rank ~ logdate, data = df_validdates)
df$arank - min(df$arank
)
df$arank <- df$rank
df$arank - min(df$arank)
df$arank <- df$arank - min(df$arank) + 1
df$arank <- df$arank - min(df$arank) + 1
df$arank <- df$arank / (max(df$arank) + 1)
df$arank <- log(arank / (1 - arank))
df$arank <- log(df$arank / (1 - df$arank))
plot(df$arank)
hist(df$arank)
hist(df$dateend, breaks = 300)
sum(df$dateend == 0)
sum(df$datebegin == 0 & df$dateend == 0)
head(df$century[df$datebegin == 0 & df$dateend == 0])
#making rank something reasonable
hist(df$rank, breaks = 300)
summary(df$rank)
plot(rank ~ views, data = df)
df$arank <- df$rank
df$arank <- df$arank - min(df$arank) + 1
df$arank <- df$arank / (max(df$arank) + 1)
df$arank <- log(df$arank / (1 - df$arank))
df_validdates <- df[df$datebegin != 0 | df$dateend != 0,]
df_validdates$meddate <- (df_validdates$datebegin + df_validdates$dateend) / 2
hist(df_validdates$meddate, breaks = 300)
#df_validdates$meddate
# lm1 <- lm(views ~ meddate, data = df_validdates)
# summary(lm1)
# plot(lm1)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate + 1)
hist(df_validdates$logdate)
df_validdates$logviews <- log(df_validdates$views + 1)
hist(df_validdates$logviews)
summary(df_validdates$logviews)
lm2 <- lm(logviews ~ logdate, data = df_validdates)
summary(lm2)
plot(logviews ~ logdate, data = df_validdates)
abline(lm2, col = "Blue")
plot(lm2) #assumptions really not met
boxplot(views ~ ffculture, data = df)
plot(rank ~ logdate, data = df_validdates)
plot(arank ~ logdate, data = df_validdates)
rank
plot(rank ~ logdate, data = df_validdates)
plot(arank ~ logdate, data = df_validdates)
plot(rank ~ logdate, data = df_validdates)
plot(arank ~ logdate, data = df_validdates)
lm3 <- lm(arank ~ logdate, data = df_validdates)
summary(lm3)
plot(lm3)
summary(lm3)
plot(lm3)
plot(rank ~ logdate, data = df_validdates)
plot(arank ~ logdate, data = df_validdates)
plot(rank ~ logdate, data = df_validdates)
plot(arank ~ logdate, data = df_validdates)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate + 1)
hist(df_validdates$logdate)
df_validdates$logviews <- log(df_validdates$views + 1)
hist(df_validdates$logviews)
summary(df_validdates$logviews)
lm2 <- lm(logviews ~ logdate, data = df_validdates)
summary(lm2)
plot(logviews ~ logdate, data = df_validdates)
abline(lm2, col = "Blue")
plot(lm2) #assumptions really not met
boxplot(views ~ ffculture, data = df)
plot(lm3, which = c(1, 2))
plot(lm2, which = c(1, 2)) #assumptions really not met
hist(df$dateend, breaks = 300)
sum(df$dateend == 0)
sum(df$datebegin == 0 & df$dateend == 0)
head(df$century[df$datebegin == 0 & df$dateend == 0])
#making rank something reasonable
hist(df$rank, breaks = 300)
summary(df$rank)
plot(rank ~ views, data = df)
df$arank <- df$rank
df$arank <- df$arank - min(df$arank) + 1
df$arank <- df$arank / (max(df$arank) + 1)
df$arank <- log(df$arank / (1 - df$arank))
df_validdates <- df[df$datebegin != 0 | df$dateend != 0,]
df_validdates$meddate <- (df_validdates$datebegin + df_validdates$dateend) / 2
hist(df_validdates$meddate, breaks = 300)
#df_validdates$meddate
# lm1 <- lm(views ~ meddate, data = df_validdates)
# summary(lm1)
# plot(lm1)
boxplot(views ~ ffculture, data = df)
#making logviews something reasonable
df$logviews <- log(df$views + 1)
plot(logviews ~ ffculure, data - df)
plot(logviews ~ ffculture, data - df)
boxplot(logviews ~ ffculture, data - df)
plot(arank ~ logdate, data = df_validdates)
hist(df$dateend, breaks = 300)
sum(df$dateend == 0)
sum(df$datebegin == 0 & df$dateend == 0)
head(df$century[df$datebegin == 0 & df$dateend == 0])
#making rank something reasonable
hist(df$rank, breaks = 300)
summary(df$rank)
plot(rank ~ views, data = df)
df$arank <- df$rank
df$arank <- df$arank - min(df$arank) + 1
df$arank <- df$arank / (max(df$arank) + 1)
df$arank <- log(df$arank / (1 - df$arank))
#making logviews something reasonable
df$logviews <- log(df$views + 1)
df_validdates <- df[df$datebegin != 0 | df$dateend != 0,]
df_validdates$meddate <- (df_validdates$datebegin + df_validdates$dateend) / 2
hist(df_validdates$meddate, breaks = 300)
#df_validdates$meddate
# lm1 <- lm(views ~ meddate, data = df_validdates)
# summary(lm1)
# plot(lm1)
df_validdates$logdate <- log(max(df_validdates$meddate) - df_validdates$meddate + 1)
hist(df_validdates$logdate)
hist(df_validdates$logviews)
summary(df_validdates$logviews)
lm2 <- lm(logviews ~ logdate, data = df_validdates)
summary(lm2)
plot(logviews ~ logdate, data = df_validdates)
abline(lm2, col = "Blue")
plot(lm2, which = c(1, 2)) #assumptions really not met
boxplot(views ~ ffculture, data = df)
boxplot(logviews ~ ffculture, data - df)
plot(rank ~ logdate, data = df_validdates)
plot(arank ~ logdate, data = df_validdates)
lm3 <- lm(arank ~ logdate, data = df_validdates)
summary(lm3)
plot(lm3, which = c(1, 2))
hist(rank, data = df_validdates)
hist(rank, data = df_validdates)
hist(rank, data = df)
hist(df$rank)
hist(df$arank)
plot(lm3, which = c(1, 2))
#unique(df$century)
head(df$dateend)
plot(culture ~ rank, data = df)
hist(df$rank)
plot(df$accessionyear)
hist(df$accessionyear)
